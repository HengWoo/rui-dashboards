<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>çµå¬æ¡Œè®¿ç³»ç»Ÿ â€” å‡†ç¡®åº¦ä¼˜åŒ–æ–¹æ¡ˆ v2</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0F0F0F;--card:#1A1A1A;--card2:#222;--border:#2A2A2A;--t1:#F5F5F5;--t2:#A3A3A3;--t3:#737373;--accent:#F59E0B;--red:#EF4444;--green:#22C55E;--blue:#3B82F6;--purple:#A855F7;--orange:#EA580C}
body{background:var(--bg);color:var(--t1);font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Noto Sans SC",sans-serif;line-height:1.7;padding:0 0 80px}
.hero{padding:60px 40px 48px;max-width:900px;margin:0 auto}
.hero .tag{display:inline-block;background:var(--accent);color:#000;font-size:11px;font-weight:700;padding:3px 10px;border-radius:4px;letter-spacing:1px;text-transform:uppercase;margin-bottom:16px}
.hero h1{font-size:32px;font-weight:700;line-height:1.3;margin-bottom:12px}
.hero .sub{color:var(--t2);font-size:15px}
.hero .meta{margin-top:20px;display:flex;gap:24px;color:var(--t3);font-size:13px;flex-wrap:wrap}
.hero .meta span{display:flex;align-items:center;gap:6px}
.container{max-width:900px;margin:0 auto;padding:0 40px}
h2{font-size:22px;font-weight:700;margin:48px 0 20px;padding-bottom:12px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px}
h2 .num{background:var(--accent);color:#000;width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:800;flex-shrink:0}
h3{font-size:16px;font-weight:600;margin:24px 0 10px;color:var(--t1)}
h4{font-size:14px;font-weight:600;margin:20px 0 8px;color:var(--accent)}
p{color:var(--t2);font-size:14px;margin-bottom:12px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:24px;margin:16px 0}
.card.red{border-left:3px solid var(--red)}
.card.amber{border-left:3px solid var(--accent)}
.card.green{border-left:3px solid var(--green)}
.card.blue{border-left:3px solid var(--blue)}
.card.purple{border-left:3px solid var(--purple)}
.card h4{margin-top:0}
.pipeline{display:flex;align-items:center;gap:0;margin:20px 0;flex-wrap:wrap}
.pipeline .step{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:10px 16px;font-size:12px;color:var(--t2);text-align:center;min-width:100px}
.pipeline .step strong{display:block;color:var(--t1);font-size:13px;margin-bottom:2px}
.pipeline .step.problem{border-color:var(--red);background:#1A1111}
.pipeline .arrow{color:var(--t3);font-size:16px;margin:0 4px;flex-shrink:0}
table{width:100%;border-collapse:collapse;margin:12px 0;font-size:13px}
thead th{background:var(--card2);color:var(--t1);font-weight:600;padding:10px 12px;text-align:left;border-bottom:2px solid var(--border)}
tbody td{padding:10px 12px;border-bottom:1px solid var(--border);color:var(--t2)}
tbody tr:hover{background:var(--card)}
td.good{color:var(--green);font-weight:600}
td.bad{color:var(--red);font-weight:600}
td.warn{color:var(--accent);font-weight:600}
td.pick{background:#1A1A0A;color:var(--accent);font-weight:600}
td.new{color:var(--blue);font-weight:600;font-size:11px}
code{background:var(--card2);color:var(--accent);padding:2px 6px;border-radius:4px;font-size:12px;font-family:"SF Mono","Fira Code",monospace}
pre{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:16px;overflow-x:auto;margin:12px 0;font-size:12px;line-height:1.6;color:var(--t2);font-family:"SF Mono","Fira Code",monospace}
pre .cm{color:var(--t3)}
pre .kw{color:var(--purple)}
pre .str{color:var(--green)}
pre .fn{color:var(--blue)}
.badge{display:inline-block;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600}
.badge.p0{background:#2D1010;color:var(--red)}
.badge.p1{background:#2D2010;color:var(--accent)}
.badge.p2{background:#102D10;color:var(--green)}
.badge.updated{background:#10102D;color:var(--blue)}
ul{padding-left:20px;margin:8px 0}
ul li{color:var(--t2);font-size:14px;margin:4px 0}
.timeline{position:relative;padding-left:28px;margin:20px 0}
.timeline::before{content:'';position:absolute;left:8px;top:4px;bottom:4px;width:2px;background:var(--border)}
.timeline .item{position:relative;margin-bottom:24px}
.timeline .item::before{content:'';position:absolute;left:-24px;top:6px;width:12px;height:12px;border-radius:50%;border:2px solid var(--accent);background:var(--bg)}
.timeline .item.done::before{background:var(--accent)}
.timeline .item h4{margin-top:0;font-size:14px}
.timeline .item p{font-size:13px;margin:4px 0 0}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media(max-width:700px){.grid2{grid-template-columns:1fr}.pipeline{flex-direction:column;align-items:stretch}.pipeline .arrow{transform:rotate(90deg);text-align:center}.hero{padding:32px 20px 32px}.container{padding:0 20px}}
.highlight-box{background:linear-gradient(135deg,#1A1A0A,#1A1510);border:1px solid #3D3500;border-radius:10px;padding:20px;margin:16px 0}
.highlight-box h4{color:var(--accent);margin:0 0 8px}
.file-ref{color:var(--t3);font-size:12px;font-style:italic}
.compare{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:16px 0}
.compare .before,.compare .after{border-radius:10px;padding:20px}
.compare .before{background:#1A1111;border:1px solid #3D1111}
.compare .after{background:#111A11;border:1px solid #113D11}
.compare h4{margin:0 0 10px}
.compare .before h4{color:var(--red)}
.compare .after h4{color:var(--green)}
.compare pre{border:none;background:rgba(0,0,0,.3);font-size:11px;margin:8px 0 0}
.export-bar{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid var(--border);padding:12px 40px;display:flex;justify-content:center;gap:12px;z-index:100}
.export-bar button{background:var(--accent);color:#000;border:none;padding:8px 20px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:opacity .2s}
.export-bar button:hover{opacity:.85}
.export-bar button.secondary{background:var(--card2);color:var(--t2);border:1px solid var(--border)}
.export-bar button.secondary:hover{color:var(--t1)}
.update-tag{display:inline-block;background:#10102D;color:var(--blue);font-size:10px;font-weight:700;padding:1px 6px;border-radius:3px;margin-left:6px;vertical-align:middle}
</style>
</head>
<body>
<div class="hero">
  <div class="tag">Technical Spec v2</div>
  <h1>çµå¬æ¡Œè®¿ç³»ç»Ÿ â€” å‡†ç¡®åº¦ä¼˜åŒ–æ–¹æ¡ˆ</h1>
  <p class="sub">å…¨é“¾è·¯åˆ†æï¼šä»éŸ³é¢‘é‡‡é›†åˆ° AI ç»“æ„åŒ–è¾“å‡ºï¼Œé€å±‚å®šä½é—®é¢˜å¹¶ç»™å‡ºå®æ–½æ–¹æ¡ˆ</p>
  <div class="meta">
    <span>åˆç‰ˆ 2026-02-19 Â· æ›´æ–° 2026-02-22</span>
    <span>æœ‰ç‚¹ä¸œè¥¿é¤é¥®é›†å›¢</span>
    <span>çµå¬ Lingtin v3.9+</span>
  </div>
</div>

<div class="container">

<!-- ======================== SECTION 1 ======================== -->
<h2><span class="num">1</span>å½“å‰æ¶æ„ä¸æ•°æ®æµ</h2>

<div class="pipeline">
  <div class="step"><strong>å‰ç«¯å½•éŸ³</strong>.webm 48kbps</div>
  <div class="arrow">&rarr;</div>
  <div class="step"><strong>ä¸Šä¼ </strong>Supabase Storage</div>
  <div class="arrow">&rarr;</div>
  <div class="step"><strong>FFmpeg</strong>è½¬ PCM 16kHz</div>
  <div class="arrow">&rarr;</div>
  <div class="step problem"><strong>è®¯é£ STT</strong>æ–¹è¨€å¤§æ¨¡å‹ slm</div>
  <div class="arrow">&rarr;</div>
  <div class="step problem"><strong>æ— æ¸…æ´—</strong>ç›´æ¥ä¼ é€’</div>
  <div class="arrow">&rarr;</div>
  <div class="step"><strong>Gemini Flash</strong>ç»“æ„åŒ–åˆ†æ</div>
  <div class="arrow">&rarr;</div>
  <div class="step"><strong>å†™å…¥ DB</strong>Supabase</div>
</div>

<p>çº¢è‰²æ ‡è®°ä¸ºå½“å‰ä¸»è¦ç“¶é¢ˆç¯èŠ‚ã€‚ä»¥ä¸‹é€ä¸€åˆ†ææ¯ä¸ªç¯èŠ‚çš„é—®é¢˜ã€‚</p>

<!-- ======================== SECTION 2 ======================== -->
<h2><span class="num">2</span>é—®é¢˜æ€»ç»“</h2>

<div class="card red">
  <h4><span class="badge p0">P0 ä¸¥é‡</span> æ— è¯´è¯äººåˆ†ç¦» â€” åº—é•¿/é¡¾å®¢è§’è‰²æ··æ·†</h4>
  <p>å½“å‰ STT è¾“å‡ºæ˜¯å•ä¸€æ–‡æœ¬æµï¼Œä¸åŒºåˆ†è°åœ¨è¯´è¯ã€‚Gemini åªèƒ½é è¯­ä¹‰çŒœæµ‹å“ªäº›æ˜¯åº—é•¿é—®çš„ã€å“ªäº›æ˜¯é¡¾å®¢ç­”çš„ï¼Œå¯¼è‡´ <code>managerQuestions</code> å’Œ <code>customerAnswers</code> é¢‘ç¹é”™è¯¯ï¼Œè¿›è€Œå½±å“æƒ…ç»ªè¯„åˆ†å’Œé—®é¢˜å½’ç±»ã€‚</p>
  <p class="file-ref">æ–‡ä»¶: xunfei-stt.service.ts â€” æœªå¯ç”¨ speaker_diarization å‚æ•°</p>
</div>

<div class="card red">
  <h4><span class="badge p0">P0 ä¸¥é‡</span> Transcript æ— é¢„å¤„ç†ï¼Œå™ªå£°ç›´ä¼  AI</h4>
  <p>STT è¿”å›çš„åŸå§‹æ–‡æœ¬ç›´æ¥ä¼ ç»™ Geminiï¼Œæ²¡æœ‰ä»»ä½•æ¸…æ´—ã€‚é¤å…ç¯å¢ƒå™ªéŸ³å¯¼è‡´çš„è¯¯è¯†åˆ«ï¼ˆé‡å¤è¯­æ°”è¯ã€ä¹±ç ç‰‡æ®µï¼‰å…¨éƒ¨æ··å…¥åˆ†æï¼Œæ‹‰ä½è¾“å‡ºè´¨é‡ã€‚</p>
  <p>åŒæ—¶è®¯é£è¿”å›çš„ <code>wp</code>ï¼ˆè¯ç½®ä¿¡åº¦ï¼‰å­—æ®µè¢«å®Œå…¨ä¸¢å¼ƒï¼Œä½ç½®ä¿¡åº¦çš„é”™è¯¯è¯†åˆ«æ— æ³•è¿‡æ»¤ã€‚</p>
  <p class="file-ref">æ–‡ä»¶: ai-processing.service.ts â€” rawTranscript ç›´æ¥èµ‹ç»™ correctedTranscript</p>
</div>

<div class="card amber">
  <h4><span class="badge p1">P1 é‡è¦</span> Prompt è®¾è®¡ç¼ºé™· â€” feedbacks ç¡¬é™ 5 æ¡</h4>
  <p>å½“å‰ Gemini prompt é™åˆ¶æœ€å¤šæå– 5 æ¡ feedbackã€‚æ¡Œè®¿å½•éŸ³ä¸­å¯èƒ½æ¶‰åŠå¤šé“èœã€å¤šä¸ªç»´åº¦çš„åé¦ˆï¼Œè¶…å‡º 5 æ¡çš„è´Ÿé¢åé¦ˆä¼šè¢«æˆªæ–­ä¸¢å¤±ã€‚</p>
</div>

<div class="card amber">
  <h4><span class="badge p1">P1 é‡è¦</span> æƒ…ç»ªè¯„åˆ†å•ç»´åº¦ â€” æ— æ³•è¡¨è¾¾å¤æ‚æ„Ÿå—</h4>
  <p>å•ä¸€ <code>sentimentScore</code> (0~1) æ— æ³•åŒºåˆ†ã€Œèœå“å¥½ä½†æœåŠ¡å·®ã€çš„æƒ…å†µã€‚ä¸€ä¸ªç»¼åˆåˆ†åè€Œæ©ç›–äº†å…·ä½“é—®é¢˜ã€‚</p>
</div>

<div class="card amber">
  <h4><span class="badge p1">P1 é‡è¦</span> å½•éŸ³ç ç‡åä½ â€” å˜ˆæ‚ç¯å¢ƒä¸¢ç»†èŠ‚</h4>
  <p>å‰ç«¯å½•éŸ³ <code>audioBitsPerSecond: 48000</code>ï¼Œåœ¨é¤å…å˜ˆæ‚ç¯å¢ƒä¸‹ï¼Œ48kbps opus ç¼–ç åœ¨ä½é¢‘è¯­éŸ³åŒºå¯èƒ½ä¸¢å¤±å…³é”®ç»†èŠ‚ï¼Œå½±å“ STT è¯†åˆ«ç‡ã€‚</p>
  <p class="file-ref">æ–‡ä»¶: useAudioRecorder.ts â€” recorderOptions</p>
</div>

<div class="card green">
  <h4><span class="badge p2">P2 ä¼˜åŒ–</span> dishMentions è¡¨æœªå¡«å……</h4>
  <p>æ•°æ®åº“ä¸­ <code>lingtin_dish_mentions</code> è¡¨çš„ schema å’Œå†™å…¥æ–¹æ³•éƒ½å·²å®ç°ï¼Œä½† <code>processWithGemini</code> ä¹‹åä»æœªè°ƒç”¨å†™å…¥ã€‚èœå“çº§åˆ«ç»Ÿè®¡å®Œå…¨ä¾èµ– AI èŠå¤©æ—¶ä¸´æ—¶æ¨ç®—ï¼Œæ— æ³•åšç²¾ç¡®èšåˆã€‚</p>
  <p class="file-ref">æ–‡ä»¶: supabase.service.ts â€” insertDishMentions æ–¹æ³•å·²å­˜åœ¨ä½†æœªè¢«è°ƒç”¨</p>
</div>

<div class="card green">
  <h4><span class="badge p2">P2 ä¼˜åŒ–</span> æ— åˆ†æç½®ä¿¡åº¦è¾“å‡º</h4>
  <p>å½“å‰è¾“å‡ºä¸åŒ…å«ç½®ä¿¡åº¦ï¼Œæ— æ³•åŒºåˆ†ã€Œæ˜ç¡®å·®è¯„ã€å’Œã€Œæ¨¡ç³Šä¸­è¯„ã€ã€‚å¯¹äºè½¬å½•è´¨é‡å·®çš„å½•éŸ³ï¼Œåˆ†æç»“æœå¯èƒ½å®Œå…¨ä¸å¯é ä½†ç³»ç»Ÿæ— æ³•æ ‡è®°ã€‚</p>
</div>

<!-- ======================== SECTION 3 ======================== -->
<h2><span class="num">3</span>ä¼˜åŒ–æ–¹æ¡ˆ</h2>

<h3>3.1 STT æ¨¡å‹æ›¿æ¢ <span class="update-tag">2026-02 æ›´æ–°</span></h3>
<p>æ ¸å¿ƒéœ€æ±‚ï¼š<strong>è¯´è¯äººåˆ†ç¦» + æ–¹è¨€è¯†åˆ« + å™ªå£°ç¯å¢ƒé€‚åº”</strong>ã€‚é—¨åº—åœ¨å››å·ï¼ˆæ±Ÿæ²¹ã€ä¸Šé©¬ï¼‰ï¼Œé¡¾å®¢æ™®éå¸¦æ–¹è¨€ã€‚</p>

<table>
  <thead>
    <tr><th>æ¨¡å‹</th><th>è¯´è¯äººåˆ†ç¦»</th><th>ä¸­æ–‡/æ–¹è¨€</th><th>å™ªå£°è¡¨ç°</th><th>æˆæœ¬</th><th>æ¥å…¥æ–¹å¼</th></tr>
  </thead>
  <tbody>
    <tr><td>è®¯é£æ–¹è¨€å¤§æ¨¡å‹ <span style="color:var(--t3)">(å½“å‰)</span></td><td class="bad">ä¸æ”¯æŒ</td><td class="good">202ç§æ–¹è¨€</td><td>ä¸€èˆ¬</td><td>~&yen;0.03/æ¬¡</td><td>WebSocket</td></tr>
    <tr style="background:var(--card)"><td class="pick">é˜¿é‡Œ Paraformer-v2</td><td class="good">å†…ç½®æ”¯æŒ</td><td class="good">æ–¹è¨€å¼º</td><td class="good">å¼º</td><td class="good">&yen;0.008/15s</td><td>REST API</td></tr>
    <tr><td>é˜¿é‡Œ SenseVoice <span class="update-tag">æ–°å¢</span></td><td class="warn">éœ€å¤–æŒ‚</td><td class="good">50+è¯­è¨€</td><td class="good">å¼º</td><td class="good">å¼€æºå…è´¹</td><td>è‡ªéƒ¨ç½²/API</td></tr>
    <tr><td>OpenAI GPT-4o Transcribe <span class="update-tag">æ–°å¢</span></td><td class="good">å†…ç½®æ”¯æŒ</td><td class="good">ä¸­æ–‡æå¼º</td><td class="good">å¾ˆå¼º</td><td class="good">$0.006/min</td><td>REST API</td></tr>
    <tr><td>OpenAI GPT-4o-mini Transcribe <span class="update-tag">æ–°å¢</span></td><td class="warn">ä¸æ”¯æŒ</td><td class="good">ä¸­æ–‡æå¼º</td><td class="good">å¾ˆå¼º</td><td class="good">$0.003/min</td><td>REST API</td></tr>
    <tr><td>Google Chirp 3 <span class="update-tag">åŸ Chirp 2</span></td><td class="good">å†…ç½®æ”¯æŒ</td><td class="good">85+è¯­è¨€</td><td class="good">å†…ç½®é™å™ª</td><td>$0.016/min</td><td>REST API</td></tr>
    <tr><td>Azure Speech å¿«é€Ÿè½¬å†™ <span class="update-tag">ä»·æ ¼æ›´æ–°</span></td><td class="good">æ‰¹é‡å…è´¹</td><td class="warn">zh-CN/zh-HK</td><td class="good">å¼º</td><td class="good">$0.006/min</td><td>REST API</td></tr>
    <tr><td>Deepgram Nova-3 <span class="update-tag">ä»·æ ¼æ›´æ–°</span></td><td class="good">å†…ç½®æ”¯æŒ</td><td class="warn">æ–¹è¨€å¼±</td><td class="good">å¾ˆå¼º</td><td class="good">$0.0065/min</td><td>REST API</td></tr>
  </tbody>
</table>

<div class="highlight-box">
  <h4>æ¨èï¼šé˜¿é‡Œ Paraformer-v2ï¼ˆé€šä¹‰å¬æ‚Ÿï¼‰â€” ä»ä¸ºé¦–é€‰</h4>
  <ul>
    <li>æ–¹è¨€è¯†åˆ«èƒ½åŠ›ä¸è®¯é£æŒå¹³ï¼Œ<strong>ä¸”å†…ç½®è¯´è¯äººåˆ†ç¦»</strong></li>
    <li>REST API æ¥å…¥æ¯”è®¯é£ WebSocket æ›´ç®€å•ï¼Œä»£ç æ”¹åŠ¨æ›´å°‘</li>
    <li>æ”¯æŒé•¿éŸ³é¢‘ã€æ ‡ç‚¹ã€è¯­æ°”è¯è¿‡æ»¤ã€ITNï¼ˆæ•°å­—è§„æ•´ï¼‰</li>
    <li>æˆæœ¬æ›´ä½ï¼ˆ&yen;0.008/15s vs è®¯é£ &yen;0.03/æ¬¡ï¼‰</li>
    <li><strong>ä¸ Qwen3-TTS åŒç”Ÿæ€</strong>ï¼Œç»Ÿä¸€é˜¿é‡Œäº‘è´¦å·å’Œè®¡è´¹</li>
  </ul>
  <p style="margin-top:12px;color:var(--t3);font-size:12px">å¤‡é€‰ Aï¼šOpenAI GPT-4o Transcribe-Diarize â€” ä¸­æ–‡æ™®é€šè¯è¯†åˆ«æå¼ºï¼Œå¹»è§‰ç‡æ¯” Whisper é™ä½ 90%ï¼Œä½†æ–‡ä»¶é™ 25MB ä¸”æ— æ–¹è¨€æ”¯æŒ</p>
  <p style="color:var(--t3);font-size:12px">å¤‡é€‰ Bï¼šGoogle Chirp 3ï¼ˆåŸ Chirp 2 å·²å‡çº§ï¼‰â€” æ–°å¢è¯´è¯äººåˆ†ç¦» + å†…ç½®é™å™ªå™¨ + è‡ªåŠ¨è¯­è¨€æ£€æµ‹ï¼Œ85+ è¯­è¨€</p>
  <p style="color:var(--t3);font-size:12px">å¤‡é€‰ Cï¼šAzure Speech å¿«é€Ÿè½¬å†™ â€” æ‰¹é‡æ¨¡å¼ $0.006/min ä¸”è¯´è¯äººåˆ†ç¦»å…è´¹ï¼Œé€‚åˆå¾®è½¯æŠ€æœ¯æ ˆ</p>
</div>

<h3>3.2 LLM åˆ†ææ¨¡å‹æ›¿æ¢ <span class="update-tag">2026-02 æ›´æ–°</span></h3>
<p>å½“å‰ Gemini 2.0 Flash å¯¹ä¸­æ–‡è¯­ä¹‰ç†è§£å’Œç»“æ„åŒ–æå–æœ‰æ”¹è¿›ç©ºé—´ã€‚ä»¥ä¸‹ä¸ºæˆªè‡³ 2026 å¹´ 2 æœˆæœ€æ–°æ¨¡å‹å¯¹æ¯”ã€‚</p>

<table>
  <thead>
    <tr><th>æ¨¡å‹</th><th>ä¸­æ–‡ç†è§£</th><th>ç»“æ„åŒ–è¾“å‡º</th><th>é€Ÿåº¦</th><th>æˆæœ¬/1M tokens</th><th>é€‚ç”¨</th></tr>
  </thead>
  <tbody>
    <tr><td>Gemini 2.0 Flash <span style="color:var(--t3)">(å½“å‰)</span></td><td>è‰¯</td><td>è‰¯</td><td class="good">å¿«</td><td class="good">å·²åœç”¨</td><td>-</td></tr>
    <tr style="background:var(--card)"><td class="pick">Gemini 2.5 Flash</td><td class="good">ä¼˜</td><td class="good">ä¼˜</td><td class="good">251 tok/s</td><td class="good">$0.30 / $2.50</td><td>æ—¥å¸¸æ¡Œè®¿</td></tr>
    <tr><td>Gemini 2.5 Flash-Lite <span class="update-tag">æ–°å¢</span></td><td>è‰¯</td><td>è‰¯</td><td class="good">æå¿«</td><td class="good">$0.10 / $0.40</td><td>è¶…ä½æˆæœ¬</td></tr>
    <tr><td>DeepSeek-V3.2 <span class="update-tag">åŸ V3</span></td><td class="good">æå¼º</td><td>å¼º</td><td class="good">å¿«</td><td class="good">æä½</td><td>æ—¥å¸¸æ¡Œè®¿</td></tr>
    <tr style="background:var(--card)"><td class="pick">Qwen3-Max <span class="update-tag">åŸ Qwen-Max</span></td><td class="good">æå¼º</td><td class="good">æå¼º</td><td>ä¸­</td><td>$1.20 / $6.00</td><td>å·®è¯„äºŒå®¡</td></tr>
    <tr><td>Qwen3-Max Thinking <span class="update-tag">æ–°å¢</span></td><td class="good">æå¼º</td><td class="good">æå¼º</td><td class="warn">æ…¢</td><td>$1.20 / $6.00</td><td>å¤æ‚äº‰è®®</td></tr>
    <tr><td>Claude Sonnet 4.6 <span class="update-tag">åŸ Sonnet 4</span></td><td class="good">ä¼˜</td><td class="good">æå¼º</td><td>ä¸­</td><td>$3.00 / $15.00</td><td>å·®è¯„äºŒå®¡</td></tr>
  </tbody>
</table>

<div class="highlight-box">
  <h4>æ¨èï¼šåˆ†å±‚ç­–ç•¥ï¼ˆæ›´æ–°ç‰ˆï¼‰</h4>
  <ul>
    <li><strong>æ—¥å¸¸æ¡Œè®¿</strong>ï¼ˆsentiment &ge; 0.4ï¼‰&rarr; <strong>Gemini 2.5 Flash</strong>ï¼š251 tok/sï¼Œæ€ç»´æ¨¡å¼å¯è°ƒèŠ‚ï¼Œæ¯” 2.0 Flash ä¸­æ–‡ç†è§£æ˜¾è‘—æå‡</li>
    <li><strong>å·®è¯„å½•éŸ³</strong>ï¼ˆsentiment &lt; 0.4ï¼‰&rarr; <strong>Qwen3-Max</strong>ï¼šä¸­æ–‡è¯­ä¹‰ç†è§£æœ€å¼ºï¼Œæ”¯æŒæ€ç»´æ¨¡å¼æ·±åº¦åˆ†æï¼Œå·®è¯„ä»…å  ~2%</li>
    <li><strong>è¶…ä½æˆæœ¬åœºæ™¯</strong> &rarr; <strong>Gemini 2.5 Flash-Lite</strong>ï¼š$0.10/$0.40 per 1M tokensï¼Œæ¯” Flash ä¾¿å®œ 92%ï¼Œé€‚åˆå¯¹è´¨é‡è¦æ±‚ä¸é«˜çš„æ‰¹é‡å¤„ç†</li>
  </ul>
  <p style="margin-top:12px;color:var(--t3);font-size:12px">æ³¨æ„ï¼šDeepSeek V4ï¼ˆ1ä¸‡äº¿å‚æ•°ï¼‰é¢„è®¡ 2026 å¹´ 2 æœˆä¸­ä¸‹æ—¬å‘å¸ƒï¼Œå¯èƒ½é‡æ–°å®šä¹‰æ€§ä»·æ¯”ã€‚å»ºè®®å…³æ³¨ã€‚</p>
</div>

<h3>3.3 Transcript æ¸…æ´—å±‚ï¼ˆæ–°å¢ï¼‰</h3>
<p>åœ¨ STT è¾“å‡ºå’Œ LLM åˆ†æä¹‹é—´æ’å…¥ä¸€ä¸ªæ¸…æ´—æ­¥éª¤ï¼š</p>

<div class="compare">
  <div class="before">
    <h4>å½“å‰ï¼šæ— æ¸…æ´—</h4>
<pre>
rawTranscript &rarr; Gemini
<span class="cm">// "æ–¹è¨€å¤§æ¨¡å‹ç»“æœç›´æ¥ä½œä¸ºæœ€ç»ˆæ–‡æœ¬"</span>
</pre>
  </div>
  <div class="after">
    <h4>ä¼˜åŒ–åï¼šåŠ å…¥æ¸…æ´—</h4>
<pre>
rawTranscript
  &rarr; å»é™¤è¿ç»­é‡å¤ç‰‡æ®µ
  &rarr; è¿‡æ»¤ä½ç½®ä¿¡åº¦è¯ (wp)
  &rarr; å»å¤šä½™è¯­æ°”è¯
  &rarr; åˆå¹¶ç¢ç‰‡å¥
  &rarr; cleanTranscript &rarr; Gemini
</pre>
  </div>
</div>

<h3>3.4 Prompt ä¼˜åŒ–</h3>

<div class="compare">
  <div class="before">
    <h4>å½“å‰ Prompt è¾“å‡ºç»“æ„</h4>
<pre>
{
  "<span class="str">aiSummary</span>": "20å­—ä»¥å†…æ‘˜è¦",
  "<span class="str">sentimentScore</span>": 0.5,
  "<span class="str">feedbacks</span>": [<span class="cm">æœ€å¤š5æ¡</span>],
  "<span class="str">managerQuestions</span>": [...],
  "<span class="str">customerAnswers</span>": [...]
}
</pre>
  </div>
  <div class="after">
    <h4>ä¼˜åŒ–åè¾“å‡ºç»“æ„</h4>
<pre>
{
  "<span class="str">aiSummary</span>": "20å­—ä»¥å†…æ‘˜è¦",
  "<span class="str">sentimentScore</span>": 0.5,
  "<span class="str">dimensions</span>": {
    "<span class="str">taste</span>": 0.7,
    "<span class="str">service</span>": 0.6,
    "<span class="str">speed</span>": 0.3
  },
  "<span class="str">confidence</span>": 0.85,
  "<span class="str">feedbacks</span>": [<span class="cm">æœ€å¤š10æ¡</span>],
  "<span class="str">dishMentions</span>": [
    {"<span class="str">dish</span>":"é…¸æ±¤é±¼","<span class="str">sentiment</span>":"negative"}
  ],
  "<span class="str">managerQuestions</span>": [...],
  "<span class="str">customerAnswers</span>": [...]
}
</pre>
  </div>
</div>

<p>å…³é”®å˜åŒ–ï¼š</p>
<ul>
  <li><strong>feedbacks ä¸Šé™ 5&rarr;10</strong>ï¼šé¿å…æˆªæ–­é‡è¦åé¦ˆ</li>
  <li><strong>æ–°å¢ dimensions</strong>ï¼šå¤šç»´åº¦è¯„åˆ†ï¼ˆå£å‘³/æœåŠ¡/é€Ÿåº¦ï¼‰ï¼Œæ›¿ä»£å•ä¸€åˆ†æ•°</li>
  <li><strong>æ–°å¢ confidence</strong>ï¼šæ ‡è®°åˆ†æå¯ä¿¡åº¦ï¼Œä½ç½®ä¿¡åº¦ç»“æœå¯äººå·¥å¤æ ¸</li>
  <li><strong>æ–°å¢ dishMentions</strong>ï¼šç›´æ¥æå–èœå“ï¼Œå†™å…¥ <code>lingtin_dish_mentions</code> è¡¨</li>
  <li><strong>è¯´è¯äººæ ‡è®°é€‚é…</strong>ï¼šå½“ STT æä¾› speaker tag åï¼Œprompt éœ€æ˜ç¡®å¼•å¯¼æŒ‰æ ‡è®°åŒºåˆ†è§’è‰²</li>
</ul>

<h3>3.5 å½•éŸ³è´¨é‡æå‡</h3>

<div class="card">
  <p>å‰ç«¯æ”¹åŠ¨æå°ï¼Œä¸€è¡Œé…ç½®ï¼š</p>
<pre>
<span class="cm">// useAudioRecorder.ts</span>
<span class="kw">const</span> recorderOptions = {
  audioBitsPerSecond: <span class="str">96000</span>,  <span class="cm">// 48000 &rarr; 96000</span>
};

<span class="cm">// getUserMedia constraints</span>
audio: {
  echoCancellation: <span class="kw">true</span>,
  noiseSuppression: <span class="kw">true</span>,
  autoGainControl: <span class="kw">true</span>,    <span class="cm">// æ–°å¢ï¼šç¨³å®šéŸ³é‡</span>
  sampleRate: <span class="str">44100</span>,
}
</pre>
</div>

<h3>3.6 TTS è¯­éŸ³åˆæˆï¼ˆæ–°å¢æ¨¡å—ï¼‰<span class="update-tag">2026-02 æ–°å¢</span></h3>
<p>æ¡Œè®¿ç³»ç»Ÿå¯æ‰©å±• TTS èƒ½åŠ›ï¼šä¸ºç®¡ç†å±‚<strong>ç”Ÿæˆè¯­éŸ³ç‰ˆæ—¥æŠ¥æ‘˜è¦</strong>ã€<strong>å·®è¯„è¯­éŸ³æé†’</strong>ã€æˆ–åœ¨åº”ç”¨ç«¯ä¸ºä¸åŒè¯­è¨€çš„å‘˜å·¥æä¾›è¯­éŸ³æ’­æŠ¥ã€‚ä»¥ä¸‹ä¸ºæˆªè‡³ 2026 å¹´ 2 æœˆæœ€æ–°æ–¹æ¡ˆã€‚</p>

<table>
  <thead>
    <tr><th>æ¨¡å‹</th><th>ä¸­æ–‡è´¨é‡</th><th>è¯­éŸ³å…‹éš†</th><th>æµå¼è¾“å‡º</th><th>æˆæœ¬</th><th>ç‰¹è‰²</th></tr>
  </thead>
  <tbody>
    <tr style="background:var(--card)"><td class="pick">Qwen3-TTS-Instruct-Flash</td><td class="good">SOTA</td><td class="good">æ”¯æŒ</td><td class="good">12Hz æµå¼</td><td class="good">é˜¿é‡Œäº‘è®¡è´¹</td><td>10 è¯­è¨€ Â· è¯­éŸ³è®¾è®¡ Â· å¼€æº</td></tr>
    <tr><td>Qwen3-TTS-Flash (è½»é‡)</td><td class="good">ä¼˜</td><td class="good">æ”¯æŒ</td><td class="good">æµå¼</td><td class="good">æ›´ä½</td><td>ä½å»¶è¿Ÿä¼˜å…ˆ</td></tr>
    <tr><td>CosyVoice v3</td><td class="good">ä¼˜</td><td class="good">æ”¯æŒ</td><td class="good">æµå¼</td><td class="good">é˜¿é‡Œäº‘è®¡è´¹</td><td>Qwen3-TTS å‰ä»£</td></tr>
    <tr><td>Gemini 2.5 Flash TTS</td><td>è‰¯</td><td class="good">æ”¯æŒ</td><td class="good">æµå¼</td><td>$0.50/$10 per 1M tok</td><td>è‡ªç„¶è¯­è¨€æ§åˆ¶é£æ ¼</td></tr>
    <tr><td>Gemini 2.5 Pro TTS</td><td class="good">ä¼˜</td><td class="good">æ”¯æŒ</td><td class="good">æµå¼</td><td>$1.00/$20 per 1M tok</td><td>30 é¢„è®¾éŸ³è‰² Â· å¤šè¯´è¯äºº</td></tr>
    <tr><td>MiniMax TTS</td><td class="good">æå¼º(ç²¤+æ™®)</td><td class="good">æ”¯æŒ</td><td class="good">æµå¼</td><td>ç«äº‰åŠ›</td><td>300+ éŸ³è‰² Â· 20ä¸‡å­—é•¿æ–‡</td></tr>
    <tr><td>OpenAI TTS-1</td><td>è‰¯</td><td class="bad">ä¸æ”¯æŒ</td><td class="good">æµå¼</td><td>$15/1M chars</td><td>6 é¢„è®¾éŸ³è‰² Â· ç®€å•æ˜“ç”¨</td></tr>
    <tr><td>ElevenLabs</td><td>è‰¯</td><td class="good">æ”¯æŒ</td><td class="good">æµå¼</td><td class="bad">$206/1M chars</td><td>æœ€è¡¨ç°åŠ› Â· 74 è¯­è¨€</td></tr>
  </tbody>
</table>

<div class="highlight-box">
  <h4>æ¨èï¼šQwen3-TTS-Instruct-Flash</h4>
  <ul>
    <li><strong>ä¸­æ–‡ WER æœ€ä½</strong>ï¼ˆåœ¨å¯¹æ¯” MiniMaxã€ElevenLabs ç­‰ç³»ç»Ÿä¸­æ’åç¬¬ä¸€ï¼‰</li>
    <li><strong>è¯­éŸ³è®¾è®¡</strong>ï¼šè‡ªç„¶è¯­è¨€æè¿°åˆ›å»ºéŸ³è‰²ï¼ˆ"æ¸©æš–çš„å¥³å£°ï¼Œ30å¤šå²ï¼Œä¸“ä¸šè¯­è°ƒ"ï¼‰</li>
    <li><strong>è¯­éŸ³å…‹éš†</strong>ï¼šçŸ­éŸ³é¢‘æ ·æœ¬å³å¯å…‹éš†ï¼Œ$0.01/æ¬¡ï¼Œå¯åˆ›å»ºç»Ÿä¸€çš„ã€Œçµå¬åŠ©æ‰‹ã€éŸ³è‰²</li>
    <li><strong>åŒç”Ÿæ€ä¼˜åŠ¿</strong>ï¼šä¸ Paraformer STT + Qwen3-Max LLM ç»Ÿä¸€åœ¨é˜¿é‡Œäº‘ï¼Œä¸€ä¸ªè´¦å·ç®¡ç†</li>
    <li><strong>å¼€æº</strong>ï¼š0.6B/1.7B æ¨¡å‹å®Œå…¨å¼€æºï¼Œå¯è‡ªéƒ¨ç½²é™ä½æˆæœ¬</li>
  </ul>
  <p style="margin-top:12px;color:var(--t3);font-size:12px">å¤‡é€‰ï¼šGemini 2.5 Pro TTS â€” è‡ªç„¶è¯­è¨€æ§åˆ¶é£æ ¼æä¸ºçµæ´»ï¼ˆ"ç”¨è½»æ¾çš„è¯­æ°”è¯»è¿™æ®µå·®è¯„æ‘˜è¦"ï¼‰ï¼Œé€‚åˆå¤šæ ·åŒ–è¯­éŸ³åœºæ™¯</p>
  <p style="color:var(--t3);font-size:12px">å¤‡é€‰ï¼šMiniMax TTS â€” ç²¤è¯­+æ™®é€šè¯è´¨é‡æä½³ï¼Œ300+ éŸ³è‰²ï¼Œé€‚åˆéœ€è¦å¤§é‡éŸ³è‰²é€‰æ‹©çš„åœºæ™¯</p>
</div>

<!-- ======================== SECTION 4 ======================== -->
<h2><span class="num">4</span>ä¼˜åŒ–åæ¶æ„ <span class="update-tag">æ›´æ–°</span></h2>

<div class="pipeline">
  <div class="step" style="border-color:var(--green)"><strong>å‰ç«¯å½•éŸ³</strong>.webm 96kbps + AGC</div>
  <div class="arrow">&rarr;</div>
  <div class="step"><strong>ä¸Šä¼ </strong>Supabase Storage</div>
  <div class="arrow">&rarr;</div>
  <div class="step" style="border-color:var(--green)"><strong>é˜¿é‡Œ Paraformer</strong>STT + è¯´è¯äººåˆ†ç¦»</div>
  <div class="arrow">&rarr;</div>
  <div class="step" style="border-color:var(--green)"><strong>æ–‡æœ¬æ¸…æ´—</strong>å»å™ª/å»é‡/è¿‡æ»¤</div>
  <div class="arrow">&rarr;</div>
  <div class="step" style="border-color:var(--green)"><strong>Gemini 2.5 Flash<br>/ Qwen3-Max</strong>åˆ†å±‚åˆ†æ</div>
  <div class="arrow">&rarr;</div>
  <div class="step"><strong>å†™å…¥ DB</strong>+ dishMentions</div>
  <div class="arrow">&rarr;</div>
  <div class="step" style="border-color:var(--blue)"><strong>Qwen3-TTS</strong>è¯­éŸ³æ‘˜è¦(å¯é€‰)</div>
</div>

<p>ç»¿è‰²æ ‡è®°ä¸ºæ ¸å¿ƒä¼˜åŒ–ç¯èŠ‚ï¼Œè“è‰²ä¸ºæ–°å¢å¯é€‰æ¨¡å—ã€‚</p>

<!-- ======================== SECTION 5 ======================== -->
<h2><span class="num">5</span>å®æ–½è®¡åˆ’</h2>

<div class="timeline">
  <div class="item">
    <h4>Phase 1 â€” å¿«é€Ÿè§æ•ˆï¼ˆ1-2å¤©ï¼‰</h4>
    <p><span class="badge p0">P0</span> Transcript æ¸…æ´—å±‚ + <code>wp</code> ç½®ä¿¡åº¦è¿‡æ»¤</p>
    <p><span class="badge p1">P1</span> å½•éŸ³ç ç‡ 48&rarr;96kbpsï¼Œå¯ç”¨ AGC</p>
    <p><span class="badge p1">P1</span> feedbacks ä¸Šé™ 5&rarr;10ï¼Œæ–°å¢ dimensions å¤šç»´è¯„åˆ†</p>
    <p style="color:var(--t3);font-size:12px;margin-top:6px">æ¶‰åŠæ–‡ä»¶: ai-processing.service.ts, useAudioRecorder.ts</p>
    <p style="color:var(--t3);font-size:12px">æ”¹åŠ¨é‡: ~100è¡Œä»£ç ï¼Œä¸å½±å“ç°æœ‰æ•°æ®ç»“æ„</p>
  </div>
  <div class="item">
    <h4>Phase 2 â€” æ ¸å¿ƒå‡çº§ï¼ˆ3-5å¤©ï¼‰</h4>
    <p><span class="badge p0">P0</span> STT æ›¿æ¢ï¼šè®¯é£ &rarr; é˜¿é‡Œ Paraformer-v2ï¼ˆå«è¯´è¯äººåˆ†ç¦»ï¼‰</p>
    <p><span class="badge p0">P0</span> Prompt é€‚é…è¯´è¯äººæ ‡è®°ï¼Œæ˜ç¡®è§’è‰²åŒºåˆ†è§„åˆ™</p>
    <p><span class="badge p1">P1</span> LLM å‡çº§ï¼šGemini 2.0 Flash &rarr; 2.5 Flash</p>
    <p><span class="badge updated">æ›´æ–°</span> å·®è¯„äºŒå®¡ï¼šQwen-Max &rarr; Qwen3-Maxï¼ˆæ”¯æŒ Thinking æ¨¡å¼ï¼‰</p>
    <p style="color:var(--t3);font-size:12px;margin-top:6px">æ¶‰åŠæ–‡ä»¶: æ–°å»º alibaba-stt.service.tsï¼Œæ›¿æ¢ xunfei-stt.service.ts è°ƒç”¨</p>
    <p style="color:var(--t3);font-size:12px">æ”¹åŠ¨é‡: æ–°å¢ 1 ä¸ª service æ–‡ä»¶ï¼Œä¿®æ”¹ 2-3 ä¸ªè°ƒç”¨ç‚¹</p>
  </div>
  <div class="item">
    <h4>Phase 3 â€” ç²¾ç»†åŒ–ï¼ˆ2-3å¤©ï¼‰</h4>
    <p><span class="badge p1">P1</span> å·®è¯„äºŒå®¡æœºåˆ¶ï¼šsentiment &lt; 0.4 æ—¶è‡ªåŠ¨è°ƒç”¨ Qwen3-Max å¤æ ¸</p>
    <p><span class="badge p2">P2</span> dishMentions è¡¨å¡«å……ï¼Œå®ç°èœå“çº§åˆ«èšåˆç»Ÿè®¡</p>
    <p><span class="badge p2">P2</span> æ–°å¢ confidence å­—æ®µï¼Œä½ç½®ä¿¡åº¦ç»“æœæ ‡è®°äººå·¥å¤æ ¸</p>
    <p style="color:var(--t3);font-size:12px;margin-top:6px">æ¶‰åŠæ–‡ä»¶: ai-processing.service.ts, supabase.service.ts</p>
    <p style="color:var(--t3);font-size:12px">å¯èƒ½éœ€è¦ DB migration: dimensions JSONB å­—æ®µ, confidence float å­—æ®µ</p>
  </div>
  <div class="item">
    <h4>Phase 4 â€” TTS è¯­éŸ³æ‰©å±•ï¼ˆ2-3å¤©ï¼‰<span class="update-tag">æ–°å¢</span></h4>
    <p><span class="badge p2">P2</span> æ¥å…¥ Qwen3-TTS-Instruct-Flashï¼Œåˆ›å»ºã€Œçµå¬åŠ©æ‰‹ã€ç»Ÿä¸€éŸ³è‰²</p>
    <p><span class="badge p2">P2</span> æ—¥æŠ¥è¯­éŸ³æ‘˜è¦ï¼šæ¯æ—¥è‡ªåŠ¨ç”Ÿæˆç®¡ç†å±‚è¯­éŸ³ç®€æŠ¥</p>
    <p><span class="badge p2">P2</span> å·®è¯„è¯­éŸ³æé†’ï¼šå·®è¯„å½•éŸ³åˆ†æå®Œæˆåæ¨é€è¯­éŸ³é€šçŸ¥ç»™åº—é•¿</p>
    <p style="color:var(--t3);font-size:12px;margin-top:6px">æ¶‰åŠæ–‡ä»¶: æ–°å»º qwen-tts.service.tsï¼Œä¿®æ”¹æ—¥æŠ¥ç”Ÿæˆé€»è¾‘</p>
    <p style="color:var(--t3);font-size:12px">æ”¹åŠ¨é‡: æ–°å¢ 1 ä¸ª service æ–‡ä»¶ + è°ƒç”¨ç‚¹</p>
  </div>
</div>

<!-- ======================== SECTION 6 ======================== -->
<h2><span class="num">6</span>é¢„æœŸæ•ˆæœ</h2>

<div class="grid2">
  <div class="card">
    <h4 style="color:var(--red)">ä¼˜åŒ–å‰</h4>
    <ul>
      <li>åº—é•¿/é¡¾å®¢è§’è‰²ç»å¸¸æ··æ·†</li>
      <li>å™ªå£°è¯¯è¯†åˆ«æ±¡æŸ“åˆ†æç»“æœ</li>
      <li>è´Ÿé¢åé¦ˆå¯èƒ½è¢«æˆªæ–­ï¼ˆ5æ¡ä¸Šé™ï¼‰</li>
      <li>å•ä¸€æƒ…ç»ªåˆ†æ— æ³•è¡¨è¾¾å¤æ‚æ„Ÿå—</li>
      <li>æ— æ³•åˆ¤æ–­åˆ†æç»“æœæ˜¯å¦å¯é </li>
      <li>èœå“ç»Ÿè®¡é  AI ä¸´æ—¶æ¨ç®—</li>
      <li>ç®¡ç†å±‚åªèƒ½çœ‹æ–‡å­—æŠ¥å‘Š</li>
    </ul>
  </div>
  <div class="card">
    <h4 style="color:var(--green)">ä¼˜åŒ–å</h4>
    <ul>
      <li>è¯´è¯äººæ ‡è®°ï¼Œè§’è‰²åŒºåˆ†å‡†ç¡®</li>
      <li>æ–‡æœ¬æ¸…æ´—è¿‡æ»¤å™ªå£°å¹²æ‰°</li>
      <li>æœ€å¤š 10 æ¡ feedback è¦†ç›–å…¨é¢</li>
      <li>å£å‘³/æœåŠ¡/é€Ÿåº¦å¤šç»´åº¦è¯„åˆ†</li>
      <li>confidence æ ‡è®°å¯ç–‘ç»“æœ</li>
      <li>èœå“çº§åˆ«ç²¾ç¡®èšåˆï¼ˆdish_mentions è¡¨ï¼‰</li>
      <li>è¯­éŸ³æ—¥æŠ¥ + å·®è¯„è¯­éŸ³æé†’</li>
    </ul>
  </div>
</div>

<div class="card blue" style="margin-top:24px">
  <h4 style="color:var(--blue)">æˆæœ¬å½±å“ <span class="update-tag">2026-02 æ›´æ–°</span></h4>
  <p>ä»¥ 2/19 æ•°æ®ä¸ºå‚è€ƒï¼ˆ317 æ¡æ¡Œè®¿/å¤©ï¼‰ï¼š</p>
  <table>
    <thead><tr><th>é¡¹ç›®</th><th>å½“å‰æˆæœ¬/å¤©</th><th>ä¼˜åŒ–åæˆæœ¬/å¤©</th><th>å˜åŒ–</th></tr></thead>
    <tbody>
      <tr><td>STT</td><td>~&yen;9.5ï¼ˆè®¯é£ï¼‰</td><td>~&yen;5.1ï¼ˆé˜¿é‡Œ Paraformerï¼‰</td><td class="good">-46%</td></tr>
      <tr><td>LLMï¼ˆæ—¥å¸¸ï¼‰</td><td>~&yen;1.6ï¼ˆFlash 2.0ï¼‰</td><td>~&yen;2.5ï¼ˆFlash 2.5ï¼‰</td><td class="warn">+56%</td></tr>
      <tr><td>LLMï¼ˆå·®è¯„äºŒå®¡ï¼‰</td><td>-</td><td>~&yen;0.14ï¼ˆ7æ¡&times;Qwen3-Maxï¼‰</td><td class="warn">æ–°å¢</td></tr>
      <tr><td>TTSï¼ˆè¯­éŸ³æ‘˜è¦ï¼‰</td><td>-</td><td>~&yen;0.5ï¼ˆQwen3-TTSï¼‰</td><td class="warn">æ–°å¢</td></tr>
      <tr><td><strong>åˆè®¡</strong></td><td><strong>~&yen;11.1</strong></td><td><strong>~&yen;8.2</strong></td><td class="good"><strong>-26%</strong></td></tr>
    </tbody>
  </table>
  <p style="margin-top:8px">STT æˆæœ¬å¤§å¹…é™ä½ + LLM/TTS å°å¹…ä¸Šå‡ = <strong>æ€»æˆæœ¬ä¸‹é™çº¦ 26%ï¼Œè´¨é‡æ˜¾è‘—æå‡ + æ–°å¢è¯­éŸ³èƒ½åŠ›</strong></p>
</div>

<!-- ======================== SECTION 7 ======================== -->
<h2><span class="num">7</span>æ¶‰åŠæ–‡ä»¶æ¸…å•</h2>

<table>
  <thead><tr><th>æ–‡ä»¶</th><th>æ”¹åŠ¨ç±»å‹</th><th>Phase</th></tr></thead>
  <tbody>
    <tr><td><code>useAudioRecorder.ts</code></td><td>ä¿®æ”¹å½•éŸ³å‚æ•°ï¼ˆç ç‡ + AGCï¼‰</td><td>Phase 1</td></tr>
    <tr><td><code>ai-processing.service.ts</code></td><td>æ–°å¢æ¸…æ´—å±‚ + prompt é‡æ„ + åˆ†å±‚è°ƒç”¨</td><td>Phase 1-3</td></tr>
    <tr><td><code>xunfei-stt.service.ts</code></td><td>ä¿ç•™ä½†æ ‡è®°åºŸå¼ƒï¼ˆfallbackï¼‰</td><td>Phase 2</td></tr>
    <tr><td><code>alibaba-stt.service.ts</code></td><td>æ–°å»ºï¼šé˜¿é‡Œ Paraformer æ¥å…¥</td><td>Phase 2</td></tr>
    <tr><td><code>supabase.service.ts</code></td><td>å¯ç”¨ insertDishMentions è°ƒç”¨</td><td>Phase 3</td></tr>
    <tr><td><code>database.ts</code></td><td>è¡¥å…… dimensions / confidence ç±»å‹</td><td>Phase 3</td></tr>
    <tr><td>Supabase Migration</td><td>æ–°å¢å­—æ®µ: dimensions, confidence</td><td>Phase 3</td></tr>
    <tr><td><code>qwen-tts.service.ts</code> <span class="update-tag">æ–°å¢</span></td><td>æ–°å»ºï¼šQwen3-TTS æ¥å…¥ + è¯­éŸ³å…‹éš†</td><td>Phase 4</td></tr>
    <tr><td>æ—¥æŠ¥ç”Ÿæˆé€»è¾‘</td><td>å¢åŠ è¯­éŸ³æ‘˜è¦ç”Ÿæˆè°ƒç”¨</td><td>Phase 4</td></tr>
  </tbody>
</table>

<!-- ======================== SECTION 8 ======================== -->
<h2><span class="num">8</span>å‚è€ƒèµ„æ–™</h2>

<div class="card" style="font-size:12px">
<p style="font-size:13px;color:var(--t1);font-weight:600;margin-bottom:8px">STT æ¨¡å‹</p>
<ul>
  <li>é˜¿é‡Œ Paraformer-v2: <a href="https://www.alibabacloud.com/help/en/model-studio/paraformer-speech-recognition/" style="color:var(--blue)">alibabacloud.com/help</a></li>
  <li>é˜¿é‡Œ SenseVoice: <a href="https://github.com/modelscope/FunASR" style="color:var(--blue)">github.com/modelscope/FunASR</a></li>
  <li>OpenAI GPT-4o Transcribe: <a href="https://platform.openai.com/docs/models/gpt-4o-transcribe" style="color:var(--blue)">platform.openai.com</a></li>
  <li>Google Chirp 3: <a href="https://docs.cloud.google.com/speech-to-text/docs/models/chirp-3" style="color:var(--blue)">docs.cloud.google.com</a></li>
  <li>Deepgram Nova-3: <a href="https://developers.deepgram.com/docs/models-languages-overview" style="color:var(--blue)">developers.deepgram.com</a></li>
  <li>Azure Speech: <a href="https://azure.microsoft.com/en-us/pricing/details/speech/" style="color:var(--blue)">azure.microsoft.com</a></li>
</ul>
<p style="font-size:13px;color:var(--t1);font-weight:600;margin:12px 0 8px">LLM æ¨¡å‹</p>
<ul>
  <li>Gemini 2.5 Flash/Pro: <a href="https://ai.google.dev/gemini-api/docs/pricing" style="color:var(--blue)">ai.google.dev</a></li>
  <li>Qwen3-Max: <a href="https://openrouter.ai/qwen/qwen3-max" style="color:var(--blue)">openrouter.ai</a></li>
  <li>DeepSeek V3.2/V4: <a href="https://www.bentoml.com/blog/the-complete-guide-to-deepseek-models-from-v3-to-r1-and-beyond" style="color:var(--blue)">bentoml.com</a></li>
</ul>
<p style="font-size:13px;color:var(--t1);font-weight:600;margin:12px 0 8px">TTS æ¨¡å‹</p>
<ul>
  <li>Qwen3-TTS: <a href="https://github.com/QwenLM/Qwen3-TTS" style="color:var(--blue)">github.com/QwenLM/Qwen3-TTS</a></li>
  <li>Gemini TTS: <a href="https://ai.google.dev/gemini-api/docs/speech-generation" style="color:var(--blue)">ai.google.dev</a></li>
  <li>MiniMax TTS / Inworld TTS: <a href="https://www.speechmatics.com/company/articles-and-news/best-tts-apis-in-2025-top-12-text-to-speech-services-for-developers" style="color:var(--blue)">speechmatics.com</a></li>
</ul>
</div>

</div><!-- .container -->

<!-- ======================== EXPORT BAR ======================== -->
<div class="export-bar">
  <button onclick="exportLlmsTxt()">å¯¼å‡º llms.txtï¼ˆä¾› AI Agent ä½¿ç”¨ï¼‰</button>
  <button class="secondary" onclick="exportFullMd()">å¯¼å‡ºå®Œæ•´ Markdown</button>
</div>

<script>
function exportLlmsTxt() {
  const txt = `# çµå¬æ¡Œè®¿ç³»ç»Ÿ â€” å‡†ç¡®åº¦ä¼˜åŒ–æ–¹æ¡ˆ

> å…¨é“¾è·¯åˆ†æï¼šä»éŸ³é¢‘é‡‡é›†åˆ° AI ç»“æ„åŒ–è¾“å‡ºï¼Œé€å±‚å®šä½é—®é¢˜å¹¶ç»™å‡ºå®æ–½æ–¹æ¡ˆã€‚é€‚ç”¨äºæœ‰ç‚¹ä¸œè¥¿é¤é¥®é›†å›¢çµå¬ Lingtin v3.9+ã€‚æ›´æ–°äº 2026-02-22ã€‚

## å½“å‰é—®é¢˜

- P0: æ— è¯´è¯äººåˆ†ç¦»ï¼Œåº—é•¿/é¡¾å®¢è§’è‰²æ··æ·†ï¼ˆxunfei-stt.service.ts æœªå¯ç”¨ speaker_diarizationï¼‰
- P0: Transcript æ— é¢„å¤„ç†ï¼Œå™ªå£°ç›´ä¼  LLMï¼ˆai-processing.service.ts ä¸­ rawTranscript ç›´ä¼ ï¼‰
- P1: feedbacks ç¡¬é™ 5 æ¡ï¼Œè´Ÿé¢åé¦ˆå¯èƒ½æˆªæ–­
- P1: æƒ…ç»ªè¯„åˆ†å•ç»´åº¦ sentimentScore (0~1)ï¼Œæ— æ³•è¡¨è¾¾å¤æ‚æ„Ÿå—
- P1: å½•éŸ³ç ç‡ 48kbps åä½ï¼Œå˜ˆæ‚ç¯å¢ƒä¸¢ç»†èŠ‚
- P2: dishMentions è¡¨æœªå¡«å……ï¼Œèœå“ç»Ÿè®¡é ä¸´æ—¶æ¨ç®—
- P2: æ— åˆ†æç½®ä¿¡åº¦è¾“å‡º

## STT æ¨¡å‹æ¨èï¼ˆ2026-02 æ›´æ–°ï¼‰

é¦–é€‰: é˜¿é‡Œ Paraformer-v2ï¼ˆé€šä¹‰å¬æ‚Ÿï¼‰
- å†…ç½®è¯´è¯äººåˆ†ç¦» + æ–¹è¨€å¼º + REST API
- æˆæœ¬: Â¥0.008/15s
- ä¸ Qwen3-TTS åŒç”Ÿæ€

å¤‡é€‰:
- OpenAI GPT-4o Transcribe-Diarize: $0.006/minï¼Œä¸­æ–‡æå¼ºï¼Œå¹»è§‰ç‡é™ 90%ï¼Œä½†é™ 25MB æ— æ–¹è¨€
- Google Chirp 3: $0.016/minï¼Œ85+ è¯­è¨€ï¼Œå†…ç½®é™å™ª + è¯´è¯äººåˆ†ç¦»
- Azure Speech å¿«é€Ÿè½¬å†™: $0.006/min æ‰¹é‡ï¼Œè¯´è¯äººåˆ†ç¦»å…è´¹
- Deepgram Nova-3: $0.0065/minï¼Œå™ªå£°è¡¨ç°æœ€å¼ºï¼Œä½†ä¸­æ–‡æ–¹è¨€å¼±
- é˜¿é‡Œ SenseVoice: å¼€æºå…è´¹ï¼Œ50+ è¯­è¨€ + æƒ…ç»ªè¯†åˆ« + éŸ³é¢‘äº‹ä»¶æ£€æµ‹

## LLM åˆ†ææ¨¡å‹æ¨èï¼ˆ2026-02 æ›´æ–°ï¼‰

åˆ†å±‚ç­–ç•¥:
- æ—¥å¸¸æ¡Œè®¿ (sentiment >= 0.4): Gemini 2.5 Flash â€” $0.30/$2.50 per 1M tokens, 251 tok/s
- å·®è¯„äºŒå®¡ (sentiment < 0.4): Qwen3-Max â€” $1.20/$6.00 per 1M tokens, æ”¯æŒ Thinking æ¨¡å¼
- è¶…ä½æˆæœ¬æ‰¹é‡: Gemini 2.5 Flash-Lite â€” $0.10/$0.40 per 1M tokens

å…¶ä»–é€‰é¡¹:
- DeepSeek-V3.2: ä¸­æ–‡æå¼ºï¼Œæä½æˆæœ¬ï¼ˆV4 é¢„è®¡ 2026 å¹´ 2 æœˆä¸­ä¸‹æ—¬å‘å¸ƒï¼‰
- Claude Sonnet 4.6: ç»“æ„åŒ–è¾“å‡ºæå¼ºï¼Œ$3.00/$15.00 per 1M tokens
- Qwen3-Max Thinking: å¤æ‚äº‰è®®åœºæ™¯ï¼Œæ·±åº¦æ¨ç†

## TTS è¯­éŸ³åˆæˆæ¨èï¼ˆ2026-02 æ–°å¢ï¼‰

é¦–é€‰: Qwen3-TTS-Instruct-Flashï¼ˆ2026-01-26 å‘å¸ƒï¼‰
- ä¸­æ–‡ WER æœ€ä½ï¼ˆSOTAï¼‰
- è¯­éŸ³å…‹éš† $0.01/æ¬¡ + è‡ªç„¶è¯­è¨€è¯­éŸ³è®¾è®¡
- 10 è¯­è¨€ï¼Œ12Hz æµå¼è¾“å‡º
- å¼€æº: github.com/QwenLM/Qwen3-TTS

å¤‡é€‰:
- Gemini 2.5 Pro TTS: $1.00/$20 per 1M tokensï¼Œè‡ªç„¶è¯­è¨€æ§åˆ¶é£æ ¼
- MiniMax TTS: ç²¤è¯­+æ™®é€šè¯æä½³ï¼Œ300+ éŸ³è‰²
- CosyVoice v3: Qwen3-TTS å‰ä»£ï¼Œé˜¿é‡Œäº‘è®¡è´¹

## Prompt ä¼˜åŒ–æ–¹å‘

è¾“å‡ºç»“æ„å‡çº§:
- feedbacks ä¸Šé™ 5â†’10
- æ–°å¢ dimensions: { taste, service, speed } å¤šç»´è¯„åˆ†
- æ–°å¢ confidence: 0-1 ç½®ä¿¡åº¦æ ‡è®°
- æ–°å¢ dishMentions: èœå“çº§åˆ«æƒ…æ„Ÿæå–
- è¯´è¯äººæ ‡è®°é€‚é…: æŒ‰ speaker tag åŒºåˆ†åº—é•¿/é¡¾å®¢

## å½•éŸ³è´¨é‡

- audioBitsPerSecond: 48000 â†’ 96000
- æ–°å¢ autoGainControl: true
- ä¿æŒ echoCancellation + noiseSuppression

## å®æ–½è®¡åˆ’

Phase 1 (1-2å¤©): æ–‡æœ¬æ¸…æ´—å±‚ + å½•éŸ³ç ç‡æå‡ + prompt ä¼˜åŒ–
Phase 2 (3-5å¤©): STT æ›¿æ¢ä¸º Paraformer-v2 + LLM å‡çº§ Gemini 2.5 Flash + Qwen3-Max
Phase 3 (2-3å¤©): å·®è¯„äºŒå®¡ + dishMentions å¡«å…… + confidence å­—æ®µ
Phase 4 (2-3å¤©): TTS æ¥å…¥ Qwen3-TTS + è¯­éŸ³æ—¥æŠ¥ + å·®è¯„è¯­éŸ³æé†’

## æˆæœ¬å½±å“

åŸºå‡†: 317 æ¡æ¡Œè®¿/å¤©
- å½“å‰æ€»æˆæœ¬: ~Â¥11.1/å¤©
- ä¼˜åŒ–åæ€»æˆæœ¬: ~Â¥8.2/å¤©ï¼ˆå« TTSï¼‰
- å˜åŒ–: -26%ï¼Œè´¨é‡æ˜¾è‘—æå‡ + æ–°å¢è¯­éŸ³èƒ½åŠ›

## æ¶‰åŠæ–‡ä»¶

- useAudioRecorder.ts: å½•éŸ³å‚æ•°ï¼ˆPhase 1ï¼‰
- ai-processing.service.ts: æ¸…æ´—å±‚ + prompt + åˆ†å±‚è°ƒç”¨ï¼ˆPhase 1-3ï¼‰
- xunfei-stt.service.ts: åºŸå¼ƒä¿ç•™ï¼ˆPhase 2ï¼‰
- alibaba-stt.service.ts: æ–°å»º Paraformer æ¥å…¥ï¼ˆPhase 2ï¼‰
- supabase.service.ts: å¯ç”¨ dishMentionsï¼ˆPhase 3ï¼‰
- database.ts: dimensions/confidence ç±»å‹ï¼ˆPhase 3ï¼‰
- qwen-tts.service.ts: æ–°å»º TTS æ¥å…¥ï¼ˆPhase 4ï¼‰
- Supabase Migration: dimensions JSONB + confidence float

## å‚è€ƒé“¾æ¥

- [é˜¿é‡Œ Paraformer-v2 æ–‡æ¡£](https://www.alibabacloud.com/help/en/model-studio/paraformer-speech-recognition/)
- [é˜¿é‡Œ SenseVoice / FunASR](https://github.com/modelscope/FunASR)
- [OpenAI GPT-4o Transcribe](https://platform.openai.com/docs/models/gpt-4o-transcribe)
- [Google Chirp 3](https://docs.cloud.google.com/speech-to-text/docs/models/chirp-3)
- [Deepgram Nova-3](https://developers.deepgram.com/docs/models-languages-overview)
- [Azure Speech å®šä»·](https://azure.microsoft.com/en-us/pricing/details/speech/)
- [Gemini API å®šä»·](https://ai.google.dev/gemini-api/docs/pricing)
- [Qwen3-Max (OpenRouter)](https://openrouter.ai/qwen/qwen3-max)
- [DeepSeek æ¨¡å‹æŒ‡å—](https://www.bentoml.com/blog/the-complete-guide-to-deepseek-models-from-v3-to-r1-and-beyond)
- [Qwen3-TTS GitHub](https://github.com/QwenLM/Qwen3-TTS)
- [Gemini TTS æ–‡æ¡£](https://ai.google.dev/gemini-api/docs/speech-generation)
- [llms.txt åè®®è§„èŒƒ](https://llmstxt.org/)
`;
  downloadFile('lingtin-accuracy-plan.llms.txt', txt.trim());
}

function exportFullMd() {
  const md = `# çµå¬æ¡Œè®¿ç³»ç»Ÿ â€” å‡†ç¡®åº¦ä¼˜åŒ–æ–¹æ¡ˆ v2

> å…¨é“¾è·¯åˆ†æï¼šä»éŸ³é¢‘é‡‡é›†åˆ° AI ç»“æ„åŒ–è¾“å‡ºï¼Œé€å±‚å®šä½é—®é¢˜å¹¶ç»™å‡ºå®æ–½æ–¹æ¡ˆ
>
> æœ‰ç‚¹ä¸œè¥¿é¤é¥®é›†å›¢ Â· çµå¬ Lingtin v3.9+ Â· æ›´æ–°äº 2026-02-22

---

## 1. å½“å‰æ¶æ„ä¸æ•°æ®æµ

\`\`\`
å‰ç«¯å½•éŸ³(.webm 48kbps) â†’ ä¸Šä¼ (Supabase) â†’ FFmpeg(PCM 16kHz) â†’ è®¯é£ STT(æ–¹è¨€å¤§æ¨¡å‹) â†’ æ— æ¸…æ´— â†’ Gemini Flash â†’ å†™å…¥ DB
\`\`\`

çº¢è‰²ç“¶é¢ˆï¼šè®¯é£ STTï¼ˆæ— è¯´è¯äººåˆ†ç¦»ï¼‰+ æ— æ¸…æ´—ï¼ˆå™ªå£°ç›´ä¼ ï¼‰

---

## 2. é—®é¢˜æ€»ç»“

### P0 ä¸¥é‡
- **æ— è¯´è¯äººåˆ†ç¦»**ï¼šSTT è¾“å‡ºå•ä¸€æ–‡æœ¬æµï¼Œåº—é•¿/é¡¾å®¢è§’è‰²æ··æ·†ã€‚æ–‡ä»¶: xunfei-stt.service.ts
- **Transcript æ— é¢„å¤„ç†**ï¼šåŸå§‹æ–‡æœ¬ç›´ä¼  Geminiï¼Œè®¯é£ wp ç½®ä¿¡åº¦å­—æ®µè¢«ä¸¢å¼ƒã€‚æ–‡ä»¶: ai-processing.service.ts

### P1 é‡è¦
- **feedbacks ç¡¬é™ 5 æ¡**ï¼šè¶…å‡ºçš„è´Ÿé¢åé¦ˆè¢«æˆªæ–­
- **æƒ…ç»ªè¯„åˆ†å•ç»´åº¦**ï¼šsentimentScore (0~1) æ— æ³•è¡¨è¾¾ã€Œèœå“å¥½ä½†æœåŠ¡å·®ã€
- **å½•éŸ³ç ç‡åä½**ï¼š48kbps opus åœ¨å˜ˆæ‚ç¯å¢ƒä¸¢ç»†èŠ‚ã€‚æ–‡ä»¶: useAudioRecorder.ts

### P2 ä¼˜åŒ–
- **dishMentions è¡¨æœªå¡«å……**ï¼šinsertDishMentions æ–¹æ³•å­˜åœ¨ä½†æœªè¢«è°ƒç”¨
- **æ— åˆ†æç½®ä¿¡åº¦è¾“å‡º**ï¼šæ— æ³•åŒºåˆ†ã€Œæ˜ç¡®å·®è¯„ã€å’Œã€Œæ¨¡ç³Šä¸­è¯„ã€

---

## 3. ä¼˜åŒ–æ–¹æ¡ˆ

### 3.1 STT æ¨¡å‹æ›¿æ¢ï¼ˆ2026-02 æ›´æ–°ï¼‰

æ ¸å¿ƒéœ€æ±‚ï¼šè¯´è¯äººåˆ†ç¦» + æ–¹è¨€è¯†åˆ« + å™ªå£°ç¯å¢ƒé€‚åº”ã€‚é—¨åº—åœ¨å››å·ï¼ˆæ±Ÿæ²¹ã€ä¸Šé©¬ï¼‰ã€‚

| æ¨¡å‹ | è¯´è¯äººåˆ†ç¦» | ä¸­æ–‡/æ–¹è¨€ | å™ªå£° | æˆæœ¬ | æ¥å…¥ |
|------|-----------|----------|------|------|------|
| è®¯é£æ–¹è¨€å¤§æ¨¡å‹ (å½“å‰) | ä¸æ”¯æŒ | 202ç§æ–¹è¨€ | ä¸€èˆ¬ | ~Â¥0.03/æ¬¡ | WebSocket |
| **é˜¿é‡Œ Paraformer-v2** â­ | å†…ç½® | æ–¹è¨€å¼º | å¼º | Â¥0.008/15s | REST API |
| é˜¿é‡Œ SenseVoice ğŸ†• | éœ€å¤–æŒ‚ | 50+è¯­è¨€ | å¼º | å¼€æºå…è´¹ | è‡ªéƒ¨ç½²/API |
| OpenAI GPT-4o Transcribe ğŸ†• | å†…ç½® | ä¸­æ–‡æå¼º | å¾ˆå¼º | $0.006/min | REST API |
| OpenAI GPT-4o-mini Transcribe ğŸ†• | ä¸æ”¯æŒ | ä¸­æ–‡æå¼º | å¾ˆå¼º | $0.003/min | REST API |
| Google Chirp 3 (åŸ Chirp 2) | å†…ç½® | 85+è¯­è¨€ | å†…ç½®é™å™ª | $0.016/min | REST API |
| Azure Speech å¿«é€Ÿè½¬å†™ | æ‰¹é‡å…è´¹ | zh-CN/zh-HK | å¼º | $0.006/min | REST API |
| Deepgram Nova-3 | å†…ç½® | æ–¹è¨€å¼± | å¾ˆå¼º | $0.0065/min | REST API |

**æ¨èï¼šé˜¿é‡Œ Paraformer-v2** â€” æ–¹è¨€å¼º + è¯´è¯äººåˆ†ç¦» + ä¸ Qwen3 ç”Ÿæ€ç»Ÿä¸€

### 3.2 LLM åˆ†ææ¨¡å‹æ›¿æ¢ï¼ˆ2026-02 æ›´æ–°ï¼‰

| æ¨¡å‹ | ä¸­æ–‡ç†è§£ | ç»“æ„åŒ– | é€Ÿåº¦ | æˆæœ¬/1M tokens | é€‚ç”¨ |
|------|---------|-------|------|---------------|------|
| Gemini 2.0 Flash (å½“å‰) | è‰¯ | è‰¯ | å¿« | å·²åœç”¨ | - |
| **Gemini 2.5 Flash** â­ | ä¼˜ | ä¼˜ | 251 tok/s | $0.30/$2.50 | æ—¥å¸¸æ¡Œè®¿ |
| Gemini 2.5 Flash-Lite ğŸ†• | è‰¯ | è‰¯ | æå¿« | $0.10/$0.40 | è¶…ä½æˆæœ¬ |
| DeepSeek-V3.2 (åŸ V3) | æå¼º | å¼º | å¿« | æä½ | æ—¥å¸¸æ¡Œè®¿ |
| **Qwen3-Max** â­ (åŸ Qwen-Max) | æå¼º | æå¼º | ä¸­ | $1.20/$6.00 | å·®è¯„äºŒå®¡ |
| Qwen3-Max Thinking ğŸ†• | æå¼º | æå¼º | æ…¢ | $1.20/$6.00 | å¤æ‚äº‰è®® |
| Claude Sonnet 4.6 (åŸ Sonnet 4) | ä¼˜ | æå¼º | ä¸­ | $3.00/$15.00 | å·®è¯„äºŒå®¡ |

**æ¨èï¼šåˆ†å±‚ç­–ç•¥** â€” æ—¥å¸¸ç”¨ Gemini 2.5 Flashï¼Œå·®è¯„ç”¨ Qwen3-Max

### 3.3 Transcript æ¸…æ´—å±‚ï¼ˆæ–°å¢ï¼‰

\`\`\`
rawTranscript â†’ å»é™¤è¿ç»­é‡å¤ â†’ è¿‡æ»¤ä½ç½®ä¿¡åº¦è¯(wp) â†’ å»è¯­æ°”è¯ â†’ åˆå¹¶ç¢ç‰‡å¥ â†’ cleanTranscript â†’ LLM
\`\`\`

### 3.4 Prompt ä¼˜åŒ–

è¾“å‡ºç»“æ„å‡çº§ï¼š
- feedbacks ä¸Šé™ 5â†’10
- æ–°å¢ dimensions: { taste, service, speed }
- æ–°å¢ confidence: 0-1
- æ–°å¢ dishMentions: [{ dish, sentiment }]
- è¯´è¯äººæ ‡è®°é€‚é…

### 3.5 å½•éŸ³è´¨é‡æå‡

\`\`\`javascript
// useAudioRecorder.ts
const recorderOptions = { audioBitsPerSecond: 96000 }; // 48000 â†’ 96000
audio: { echoCancellation: true, noiseSuppression: true, autoGainControl: true, sampleRate: 44100 }
\`\`\`

### 3.6 TTS è¯­éŸ³åˆæˆï¼ˆ2026-02 æ–°å¢ï¼‰

| æ¨¡å‹ | ä¸­æ–‡è´¨é‡ | è¯­éŸ³å…‹éš† | æµå¼ | æˆæœ¬ | ç‰¹è‰² |
|------|---------|---------|------|------|------|
| **Qwen3-TTS-Instruct-Flash** â­ | SOTA | æ”¯æŒ | 12Hz | é˜¿é‡Œäº‘è®¡è´¹ | 10è¯­è¨€Â·è¯­éŸ³è®¾è®¡Â·å¼€æº |
| Qwen3-TTS-Flash | ä¼˜ | æ”¯æŒ | æµå¼ | æ›´ä½ | ä½å»¶è¿Ÿä¼˜å…ˆ |
| CosyVoice v3 | ä¼˜ | æ”¯æŒ | æµå¼ | é˜¿é‡Œäº‘è®¡è´¹ | Qwen3-TTS å‰ä»£ |
| Gemini 2.5 Flash TTS | è‰¯ | æ”¯æŒ | æµå¼ | $0.50/$10/1M tok | è‡ªç„¶è¯­è¨€æ§åˆ¶é£æ ¼ |
| Gemini 2.5 Pro TTS | ä¼˜ | æ”¯æŒ | æµå¼ | $1.00/$20/1M tok | 30éŸ³è‰²Â·å¤šè¯´è¯äºº |
| MiniMax TTS | æå¼º(ç²¤+æ™®) | æ”¯æŒ | æµå¼ | ç«äº‰åŠ› | 300+éŸ³è‰²Â·20ä¸‡å­— |

**æ¨èï¼šQwen3-TTS-Instruct-Flash** â€” ä¸­æ–‡ SOTA + åŒç”Ÿæ€ + å¼€æº

---

## 4. ä¼˜åŒ–åæ¶æ„

\`\`\`
å‰ç«¯(.webm 96kbps+AGC) â†’ Supabase â†’ Paraformer(STT+è¯´è¯äºº) â†’ æ–‡æœ¬æ¸…æ´— â†’ Gemini 2.5 Flash/Qwen3-Max â†’ DB+dishMentions â†’ [å¯é€‰] Qwen3-TTS(è¯­éŸ³æ‘˜è¦)
\`\`\`

---

## 5. å®æ–½è®¡åˆ’

- **Phase 1 (1-2å¤©)**: æ¸…æ´—å±‚ + å½•éŸ³æå‡ + prompt ä¼˜åŒ–
- **Phase 2 (3-5å¤©)**: STTâ†’Paraformer + LLMâ†’Gemini 2.5 Flash + Qwen3-Max
- **Phase 3 (2-3å¤©)**: å·®è¯„äºŒå®¡ + dishMentions + confidence
- **Phase 4 (2-3å¤©)**: TTS æ¥å…¥ + è¯­éŸ³æ—¥æŠ¥ + å·®è¯„è¯­éŸ³æé†’

---

## 6. æˆæœ¬å½±å“

åŸºå‡†: 317 æ¡æ¡Œè®¿/å¤©

| é¡¹ç›® | å½“å‰/å¤© | ä¼˜åŒ–å/å¤© | å˜åŒ– |
|------|--------|----------|------|
| STT | ~Â¥9.5ï¼ˆè®¯é£ï¼‰ | ~Â¥5.1ï¼ˆé˜¿é‡Œï¼‰ | -46% |
| LLMï¼ˆæ—¥å¸¸ï¼‰ | ~Â¥1.6ï¼ˆFlash 2.0ï¼‰ | ~Â¥2.5ï¼ˆFlash 2.5ï¼‰ | +56% |
| LLMï¼ˆå·®è¯„äºŒå®¡ï¼‰ | - | ~Â¥0.14ï¼ˆQwen3-Maxï¼‰ | æ–°å¢ |
| TTSï¼ˆè¯­éŸ³æ‘˜è¦ï¼‰ | - | ~Â¥0.5ï¼ˆQwen3-TTSï¼‰ | æ–°å¢ |
| **åˆè®¡** | **~Â¥11.1** | **~Â¥8.2** | **-26%** |

---

## 7. æ¶‰åŠæ–‡ä»¶

| æ–‡ä»¶ | æ”¹åŠ¨ | Phase |
|------|------|-------|
| useAudioRecorder.ts | å½•éŸ³å‚æ•° | 1 |
| ai-processing.service.ts | æ¸…æ´—+prompt+åˆ†å±‚ | 1-3 |
| xunfei-stt.service.ts | åºŸå¼ƒä¿ç•™ | 2 |
| alibaba-stt.service.ts | æ–°å»º Paraformer | 2 |
| supabase.service.ts | dishMentions | 3 |
| database.ts | dimensions/confidence | 3 |
| qwen-tts.service.ts | æ–°å»º TTS | 4 |
| Supabase Migration | æ–°å¢å­—æ®µ | 3 |

---

## 8. å‚è€ƒé“¾æ¥

- [é˜¿é‡Œ Paraformer-v2](https://www.alibabacloud.com/help/en/model-studio/paraformer-speech-recognition/)
- [é˜¿é‡Œ SenseVoice / FunASR](https://github.com/modelscope/FunASR)
- [OpenAI GPT-4o Transcribe](https://platform.openai.com/docs/models/gpt-4o-transcribe)
- [Google Chirp 3](https://docs.cloud.google.com/speech-to-text/docs/models/chirp-3)
- [Deepgram Nova-3](https://developers.deepgram.com/docs/models-languages-overview)
- [Azure Speech](https://azure.microsoft.com/en-us/pricing/details/speech/)
- [Gemini API å®šä»·](https://ai.google.dev/gemini-api/docs/pricing)
- [Qwen3-Max](https://openrouter.ai/qwen/qwen3-max)
- [DeepSeek](https://www.bentoml.com/blog/the-complete-guide-to-deepseek-models-from-v3-to-r1-and-beyond)
- [Qwen3-TTS](https://github.com/QwenLM/Qwen3-TTS)
- [Gemini TTS](https://ai.google.dev/gemini-api/docs/speech-generation)
- [llms.txt åè®®](https://llmstxt.org/)
`;
  downloadFile('lingtin-accuracy-plan.md', md.trim());
}

function downloadFile(name, content) {
  const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(a.href);
}
</script>
</body>
</html>
